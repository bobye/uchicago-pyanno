

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Developer guide &mdash; pyanno 2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pyanno 2.0 documentation" href="index.html" />
    <link rel="next" title="Project Modules" href="modules.html" />
    <link rel="prev" title="Model definitions" href="models.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="modules.html" title="Project Modules"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="models.html" title="Model definitions"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pyanno 2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="developer-guide">
<h1><a class="toc-backref" href="#id1">Developer guide</a><a class="headerlink" href="#developer-guide" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="index">
<p class="topic-title first">Index</p>
<ul class="simple">
<li><a class="reference internal" href="#developer-guide" id="id1">Developer guide</a><ul>
<li><a class="reference internal" href="#git-repository" id="id2">git repository</a></li>
<li><a class="reference internal" href="#running-tests" id="id3">Running tests</a></li>
<li><a class="reference internal" href="#adding-a-new-model" id="id4">Adding a new model</a></li>
<li><a class="reference internal" href="#publishing-the-documentation" id="id5">Publishing the documentation</a></li>
<li><a class="reference internal" href="#uploading-a-new-version-of-pyanno-to-pypi" id="id6">Uploading a new version of pyAnno to PyPI</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="git-repository">
<h2><a class="toc-backref" href="#id2">git repository</a><a class="headerlink" href="#git-repository" title="Permalink to this headline">¶</a></h2>
<p>pyAnno is hosted on GitHub at
<a class="reference external" href="https://github.com/enthought/uchicago-pyanno">https://github.com/enthought/uchicago-pyanno</a>.</p>
<p>The recommended workflow to extend and improve pyAnno is the following:</p>
<ol class="arabic simple">
<li>Fork the project on GitHub</li>
<li>Implement your changes on your repository</li>
<li>Submit a pull request on GitHub</li>
</ol>
</div>
<div class="section" id="running-tests">
<span id="testing"></span><h2><a class="toc-backref" href="#id3">Running tests</a><a class="headerlink" href="#running-tests" title="Permalink to this headline">¶</a></h2>
<p>Even though the tests are written using <cite>unittest</cite>, we recommend the use of
<cite>nosetests</cite> to execute the library test suites. From the root directory of the
pyanno project, type</p>
<div class="highlight-python"><pre>$ nosetests -v pyanno/test</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The tests that verify some of the models&#8217; functionality (e.g.,
the estimation of the model parameters), are stochastic. This has the advantage
that they test different, general scenarios at each round, but occasionally
leads to test failures. If one of the test fails, please run it a second time.
If the failures are consistent, please report a bug using the
<a class="reference external" href="https://github.com/enthought/uchicago-pyanno/issues">issue tracker</a>.</p>
</div>
</div>
<div class="section" id="adding-a-new-model">
<h2><a class="toc-backref" href="#id4">Adding a new model</a><a class="headerlink" href="#adding-a-new-model" title="Permalink to this headline">¶</a></h2>
<p>This is a checklist of things to do when implementing a new model in pyAnno:</p>
<ol class="arabic simple">
<li>Write a new model implementation as a subclass of
<a class="reference internal" href="pyanno.html#pyanno.abstract_model.AbstractModel" title="pyanno.abstract_model.AbstractModel"><tt class="xref py py-class docutils literal"><span class="pre">pyanno.abstract_model.AbstractModel</span></tt></a>, implementing the full
interface.</li>
<li>Add an import statement in <tt class="xref py py-mod docutils literal"><span class="pre">pyanno.models</span></tt></li>
<li>Add some documentation about the class in the <cite>models</cite> page.</li>
</ol>
<p>To add the model to the UI:</p>
<ol class="arabic simple">
<li>Write a new subclass of <tt class="xref py py-class docutils literal"><span class="pre">pyanno.ui.model_view.PyannoModelView</span></tt>,
the <cite>traitsui</cite> graphical view of your model parameters, and of
<tt class="xref py py-class docutils literal"><span class="pre">pyanno.ui.model_view.NewModelDialog</span></tt>, which creates a dialog
requesting the parameters to create a new instance of the model.
See the classes defined in <tt class="xref py py-mod docutils literal"><span class="pre">pyanno.ui.model_a_view</span></tt> for
reference.</li>
<li>Add the name of the model, and a reference to the class and model view
in <cite>model_name</cite>, <cite>_model_name_to_class</cite>, and <cite>_model_class_to_view</cite>,
at the beginning of the <tt class="xref py py-class docutils literal"><span class="pre">pyanno.ui.model_data_view.ModelDataView</span></tt>.</li>
</ol>
</div>
<div class="section" id="publishing-the-documentation">
<h2><a class="toc-backref" href="#id5">Publishing the documentation</a><a class="headerlink" href="#publishing-the-documentation" title="Permalink to this headline">¶</a></h2>
<p>The documentation is based on <a class="reference external" href="http://sphinx.pocoo.org/index.html">Sphinx</a>.
It can be found in <tt class="file docutils literal"><span class="pre">pyanno/docs</span></tt>.</p>
<p>After editing the documentation, you should compile it, revise the result,
and publish it online:</p>
<ol class="arabic">
<li><p class="first">Check out the <cite>gh-pages</cite> branch from the git repository in a new
directory, <cite>DOCPATH</cite>.</p>
</li>
<li><p class="first">Enter the directory <tt class="file docutils literal"><span class="pre">pyanno/docs</span></tt> and
edit the <cite>BUILDDIR</cite> variable in the local <cite>Makfile</cite> to <cite>DOCPATH</cite>.</p>
</li>
<li><p class="first">Type</p>
<div class="highlight-python"><pre>$ make html</pre>
</div>
<p>Make sure the the <cite>pyanno</cite> package
is in the <cite>PYTHONPATH</cite>, or Sphinx will fail to generate the API
documentation.</p>
</li>
<li><p class="first">Enter <cite>DOCPATH</cite>, check that the documentation has been correctly generated,
and push the branch back to GitHub:</p>
<div class="highlight-python"><pre>$ git add *
$ git commit -m"DOC: describe your changes here"
$ git push origin gh-pages</pre>
</div>
</li>
</ol>
<p>The new documentation will be published within seconds.</p>
</div>
<div class="section" id="uploading-a-new-version-of-pyanno-to-pypi">
<h2><a class="toc-backref" href="#id6">Uploading a new version of pyAnno to PyPI</a><a class="headerlink" href="#uploading-a-new-version-of-pyanno-to-pypi" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Revise the <cite>setup.py</cite> file and update the version number</p>
</li>
<li><p class="first"><a class="reference internal" href="#testing"><em>Run the tests</em></a> and correct any bug</p>
</li>
<li><p class="first">Push to PyPI:</p>
<div class="highlight-python"><pre>$ python setup.py register bdist_egg bdist_wininst sdist upload</pre>
</div>
</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guide.html">User guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">pyAnno models</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Developer guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Library Reference</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="models.html"
                        title="previous chapter">Model definitions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="modules.html"
                        title="next chapter">Project Modules</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/developer_guide.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="modules.html" title="Project Modules"
             >next</a> |</li>
        <li class="right" >
          <a href="models.html" title="Model definitions"
             >previous</a> |</li>
        <li><a href="index.html">pyanno 2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Pietro Berkes, Bob Carpenter, Andrey Rzhetsky, James A. Evans.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>