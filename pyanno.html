

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pyanno Package &mdash; pyanno 2.0dev documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.0dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pyanno 2.0dev documentation" href="index.html" />
    <link rel="up" title="Project Modules" href="modules.html" />
    <link rel="next" title="models Module" href="pyanno.models.html" />
    <link rel="prev" title="Project Modules" href="modules.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pyanno.models.html" title="models Module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="modules.html" title="Project Modules"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pyanno 2.0dev documentation</a> &raquo;</li>
          <li><a href="modules.html" accesskey="U">Project Modules</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="pyanno-package">
<h1>pyanno Package<a class="headerlink" href="#pyanno-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2><a class="reference internal" href="#module-pyanno" title="pyanno"><tt class="xref py py-mod docutils literal"><span class="pre">pyanno</span></tt></a> Package<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-pyanno"></span><div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyanno.models.html">models Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyanno.models.html#module-pyanno.modelB"><tt class="docutils literal"><span class="pre">modelB</span></tt> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyanno.models.html#module-pyanno.modelBt"><tt class="docutils literal"><span class="pre">modelBt</span></tt> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyanno.models.html#module-pyanno.modelBt_loopdesign"><tt class="docutils literal"><span class="pre">modelBt_loopdesign</span></tt> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyanno.models.html#module-pyanno.modelA"><tt class="docutils literal"><span class="pre">modelA</span></tt> Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyanno.annotations.html">annotations Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyanno.annotations.html#id1"><tt class="docutils literal"><span class="pre">annotations</span></tt> Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyanno.measures.html">measures Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyanno.measures.html#id1"><tt class="docutils literal"><span class="pre">measures</span></tt> Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyanno.measures.html#module-pyanno.measures.agreement"><tt class="docutils literal"><span class="pre">agreement</span></tt> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyanno.measures.html#module-pyanno.measures.covariation"><tt class="docutils literal"><span class="pre">covariation</span></tt> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyanno.measures.html#module-pyanno.measures.distances"><tt class="docutils literal"><span class="pre">distances</span></tt> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyanno.measures.html#module-pyanno.measures.helpers"><tt class="docutils literal"><span class="pre">helpers</span></tt> Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyanno.database.html">database Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyanno.database.html#id1"><tt class="docutils literal"><span class="pre">database</span></tt> Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyanno.plots.html">plots Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyanno.plots.html#id1"><tt class="docutils literal"><span class="pre">plots</span></tt> Package</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="other-modules">
<h2>Other modules<a class="headerlink" href="#other-modules" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-pyanno.abstract_model">
<span id="abstract-model-module"></span><h3><tt class="xref py py-mod docutils literal"><span class="pre">abstract_model</span></tt> Module<a class="headerlink" href="#module-pyanno.abstract_model" title="Permalink to this headline">¶</a></h3>
<p>Defines <a class="reference internal" href="#pyanno.abstract_model.AbstractModel" title="pyanno.abstract_model.AbstractModel"><tt class="xref py py-class docutils literal"><span class="pre">AbstractModel</span></tt></a>, an abstract class that specifies the
interface of pyAnno models.</p>
<dl class="class">
<dt id="pyanno.abstract_model.AbstractModel">
<em class="property">class </em><tt class="descclassname">pyanno.abstract_model.</tt><tt class="descname">AbstractModel</tt><a class="reference internal" href="_modules/pyanno/abstract_model.html#AbstractModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.abstract_model.AbstractModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">traits.has_traits.HasTraits</span></tt></p>
<p>Abstract class defining the interface of a pyAnno model.</p>
<dl class="method">
<dt id="pyanno.abstract_model.AbstractModel.are_annotations_compatible">
<tt class="descname">are_annotations_compatible</tt><big>(</big><em>annotations</em><big>)</big><a class="reference internal" href="_modules/pyanno/abstract_model.html#AbstractModel.are_annotations_compatible"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.abstract_model.AbstractModel.are_annotations_compatible" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the annotations are compatible with the model.</p>
<p>The standard implementation is: valid if the number of annotators
is correct, if the classes are between 0 and nclasses-1,
and if missing values are marked with <a class="reference internal" href="#pyanno.util.MISSING_VALUE" title="pyanno.util.MISSING_VALUE"><tt class="xref py py-attr docutils literal"><span class="pre">pyanno.util.MISSING_VALUE</span></tt></a></p>
</dd></dl>

<dl class="staticmethod">
<dt id="pyanno.abstract_model.AbstractModel.create_initial_state">
<em class="property">static </em><tt class="descname">create_initial_state</tt><big>(</big><em>nclasses</em><big>)</big><a class="reference internal" href="_modules/pyanno/abstract_model.html#AbstractModel.create_initial_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.abstract_model.AbstractModel.create_initial_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory method returning a model with random initial parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>nclasses</strong> (<em>int</em>) &#8211; Number of label classes</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyanno.abstract_model.AbstractModel.generate_annotations">
<tt class="descname">generate_annotations</tt><big>(</big><em>nitems</em><big>)</big><a class="reference internal" href="_modules/pyanno/abstract_model.html#AbstractModel.generate_annotations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.abstract_model.AbstractModel.generate_annotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a random annotation set from the model.</p>
<p>Sample a random set of annotations from the probability distribution
defined the current model parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>nitems</strong> (<em>int</em>) &#8211; Number of items to sample</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>annotations</strong> (ndarray, shape = (n_items, n_annotators)) - annotations[i,j] is the annotation of annotator j for item i</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyanno.abstract_model.AbstractModel.infer_labels">
<tt class="descname">infer_labels</tt><big>(</big><em>annotations</em><big>)</big><a class="headerlink" href="#pyanno.abstract_model.AbstractModel.infer_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Infer posterior distribution over label classes.</p>
<p>Compute the posterior distribution over label classes given observed
annotations, <img class="math" src="_images/math/9215880e98d0a142659f35ee0ed928728161fde5.png" alt="P( \mathbf{y} | \mathbf{x})"/>.</p>
<dl class="docutils">
<dt>annotations <span class="classifier-delimiter">:</span> <span class="classifier">ndarray, shape = (n_items, n_annotators)</span></dt>
<dd>annotations[i,j] is the annotation of annotator j for item i</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>posterior</strong> (ndarray, shape = (n_items, n_classes)) - posterior[i,k] is the posterior probability of class k given the annotation observed in item i.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyanno.abstract_model.AbstractModel.log_likelihood">
<tt class="descname">log_likelihood</tt><big>(</big><em>annotations</em><big>)</big><a class="reference internal" href="_modules/pyanno/abstract_model.html#AbstractModel.log_likelihood"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.abstract_model.AbstractModel.log_likelihood" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the log likelihood of a set of annotations given the model.</p>
<p>Returns log P(annotations | current model parameters).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>annotations</strong> (<em>ndarray, shape = (n_items, n_annotators)</em>) &#8211; annotations[i,j] is the annotation of annotator j for item i</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>log_lhood</strong> (float) - log likelihood of <cite>annotations</cite></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyanno.abstract_model.AbstractModel.map">
<tt class="descname">map</tt><big>(</big><em>annotations</em><big>)</big><a class="reference internal" href="_modules/pyanno/abstract_model.html#AbstractModel.map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.abstract_model.AbstractModel.map" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes maximum a posteriori (MAP) estimate of parameters.</p>
<p>Estimate the model parameters from a set of observed annotations
using maximum a posteriori estimation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>annotations</strong> (<em>ndarray, shape = (n_items, n_annotators)</em>) &#8211; annotations[i,j] is the annotation of annotator j for item i</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyanno.abstract_model.AbstractModel.mle">
<tt class="descname">mle</tt><big>(</big><em>annotations</em><big>)</big><a class="reference internal" href="_modules/pyanno/abstract_model.html#AbstractModel.mle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.abstract_model.AbstractModel.mle" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes maximum likelihood estimate (MLE) of parameters.</p>
<p>Estimate the model parameters from a set of observed annotations
using maximum likelihood estimation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>annotations</strong> (<em>ndarray, shape = (n_items, n_annotators)</em>) &#8211; annotations[i,j] is the annotation of annotator j for item i</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyanno.abstract_model.AbstractModel.sample_posterior_over_accuracy">
<tt class="descname">sample_posterior_over_accuracy</tt><big>(</big><em>annotations</em>, <em>nsamples</em>, <em>burn_in_samples=0</em>, <em>thin_samples=1</em><big>)</big><a class="reference internal" href="_modules/pyanno/abstract_model.html#AbstractModel.sample_posterior_over_accuracy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.abstract_model.AbstractModel.sample_posterior_over_accuracy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return samples from posterior over the accuracy parameters.</p>
<p>Draw samples from <cite>P(accuracy parameters | data, model parameters)</cite>.
The accuracy parameters control the probability of an annotator
reporting the correct label (the exact nature of these parameters
varies from model to model).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>annotations</strong> (<em>ndarray, shape = (n_items, n_annotators)</em>) &#8211; annotations[i,j] is the annotation of annotator j for item i</li>
<li><strong>nsamples</strong> (<em>int</em>) &#8211; Number of samples to return (i.e., burn-in and thinning samples
are not included)</li>
<li><strong>burn_in_samples</strong> (<em>int</em>) &#8211; Discard the first <cite>burn_in_samples</cite> during the initial burn-in
phase, where the Monte Carlo chain converges to the posterior</li>
<li><strong>thin_samples</strong> (<em>int</em>) &#8211; Only return one every <cite>thin_samples</cite> samples in order to reduce
the auto-correlation in the sampling chain. This is called
&#8220;thinning&#8221; in MCMC parlance.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>samples</strong> (ndarray, shape = (n_samples, ??)) - Array of samples from the posterior distribution over parameters.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyanno.util">
<span id="util-module"></span><h3><tt class="xref py py-mod docutils literal"><span class="pre">util</span></tt> Module<a class="headerlink" href="#module-pyanno.util" title="Permalink to this headline">¶</a></h3>
<p>Utility functions.</p>
<dl class="exception">
<dt id="pyanno.util.PyannoValueError">
<em class="property">exception </em><tt class="descclassname">pyanno.util.</tt><tt class="descname">PyannoValueError</tt><a class="reference internal" href="_modules/pyanno/util.html#PyannoValueError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.util.PyannoValueError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">exceptions.ValueError</span></tt></p>
<p>ValueError subclass raised by pyAnno functions and methods.</p>
</dd></dl>

<dl class="class">
<dt id="pyanno.util.benchmark">
<em class="property">class </em><tt class="descclassname">pyanno.util.</tt><tt class="descname">benchmark</tt><big>(</big><em>name</em><big>)</big><a class="reference internal" href="_modules/pyanno/util.html#benchmark"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.util.benchmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Simple context manager to simplify benchmarking.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">with</span> <span class="n">benchmark</span><span class="p">(</span><span class="s">&#39;fast computation&#39;</span><span class="p">):</span>
    <span class="n">do_something</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyanno.util.compute_counts">
<tt class="descclassname">pyanno.util.</tt><tt class="descname">compute_counts</tt><big>(</big><em>annotations</em>, <em>nclasses</em><big>)</big><a class="reference internal" href="_modules/pyanno/util.html#compute_counts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.util.compute_counts" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform annotation data in counts format.</p>
<p>At the moment, it is hard coded for 8 annotators, 3 annotators active at
any time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>annotations</strong> (<em>ndarray, shape = (n_items, 8)</em>) &#8211; Annotations array</li>
<li><strong>nclasses</strong> (<em>int</em>) &#8211; Numer of label classes</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>data</strong> (ndarray, shape = (n_classes^3, 9)) - data[i,m] is the number of times the combination of annotators number m voted according to pattern i</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyanno.util.create_band_matrix">
<tt class="descclassname">pyanno.util.</tt><tt class="descname">create_band_matrix</tt><big>(</big><em>shape</em>, <em>diagonal_elements</em><big>)</big><a class="reference internal" href="_modules/pyanno/util.html#create_band_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.util.create_band_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a symmetrical band matrix from a list of elements.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>shape</strong> (<em>int</em>) &#8211; Width of the matrix</li>
<li><strong>diagonal_elements</strong> (<em>list or array</em>) &#8211; List of elements in the first row. If the list is smaller than <cite>shape</cite>,
the last element is used to fill the the remaining items.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyanno.util.dirichlet_llhood">
<tt class="descclassname">pyanno.util.</tt><tt class="descname">dirichlet_llhood</tt><big>(</big><em>theta</em>, <em>alpha</em><big>)</big><a class="reference internal" href="_modules/pyanno/util.html#dirichlet_llhood"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.util.dirichlet_llhood" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the log likelihood of theta under Dirichlet(alpha).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>theta</strong> (<em>ndarray</em>) &#8211; Categorical probability distribution. theta[i] is the probability
of item i. Elements of the array have to sum to 1.0 (not forced for
efficiency reasons)</li>
<li><strong>alpha</strong> (<em>ndarray</em>) &#8211; Parameters of the Dirichlet distribution</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>log_likelihood</strong> (float) - Log lihelihood of theta given alpha</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyanno.util.is_valid">
<tt class="descclassname">pyanno.util.</tt><tt class="descname">is_valid</tt><big>(</big><em>annotations</em><big>)</big><a class="reference internal" href="_modules/pyanno/util.html#is_valid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.util.is_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if annotation is valid.</p>
<p>An annotation is valid if it is not equal to the missing value,
MISSING_VALUE.</p>
</dd></dl>

<dl class="function">
<dt id="pyanno.util.labels_count">
<tt class="descclassname">pyanno.util.</tt><tt class="descname">labels_count</tt><big>(</big><em>annotations</em>, <em>nclasses</em>, <em>missing_val=-1</em><big>)</big><a class="reference internal" href="_modules/pyanno/util.html#labels_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.util.labels_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the total count of labels in observed annotations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>annotations</strong> (<em>ndarray, shape = (n_items, n_annotators)</em>) &#8211; annotations[i,j] is the annotation made by annotator j on item i</li>
<li><strong>nclasses</strong> (<em>int</em>) &#8211; Number of label classes in <cite>annotations</cite></li>
<li><strong>missing_val</strong> (<em>int</em>) &#8211; Value used to indicate missing values in the annotations.
Default is <a class="reference internal" href="#pyanno.util.MISSING_VALUE" title="pyanno.util.MISSING_VALUE"><tt class="xref py py-attr docutils literal"><span class="pre">MISSING_VALUE</span></tt></a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>count</strong> (ndarray, shape = (n_classes, )) - count[k] is the number of elements of class k in <cite>annotations</cite></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyanno.util.labels_frequency">
<tt class="descclassname">pyanno.util.</tt><tt class="descname">labels_frequency</tt><big>(</big><em>annotations</em>, <em>nclasses</em>, <em>missing_val=-1</em><big>)</big><a class="reference internal" href="_modules/pyanno/util.html#labels_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.util.labels_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the total frequency of labels in observed annotations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>annotations</strong> (<em>ndarray, shape = (n_items, n_annotators)</em>) &#8211; annotations[i,j] is the annotation made by annotator j on item i</li>
<li><strong>nclasses</strong> (<em>int</em>) &#8211; Number of label classes in <cite>annotations</cite></li>
<li><strong>missing_val</strong> (<em>int</em>) &#8211; Value used to indicate missing values in the annotations.
Default is <a class="reference internal" href="#pyanno.util.MISSING_VALUE" title="pyanno.util.MISSING_VALUE"><tt class="xref py py-attr docutils literal"><span class="pre">MISSING_VALUE</span></tt></a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>freq</strong> (ndarray, shape = (n_classes, )) - freq[k] is the frequency of elements of class k in <cite>annotations</cite>, i.e. their count over the number of total of observed (non-missing) elements</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyanno.util.majority_vote">
<tt class="descclassname">pyanno.util.</tt><tt class="descname">majority_vote</tt><big>(</big><em>annotations</em><big>)</big><a class="reference internal" href="_modules/pyanno/util.html#majority_vote"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.util.majority_vote" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute an estimate of the real class by majority vote.</p>
<p>In case of ties, return the class with smallest number.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>annotations</strong> (<em>ndarray, shape = (n_items, n_annotators)</em>) &#8211; annotations[i,j] is the annotation made by annotator j on item i</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>vote <span class="classifier-delimiter">:</span> <span class="classifier">ndarray, shape = (n_items, )</span></dt>
<dd>vote[i] is the majority vote estimate for item i</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyanno.util.ninf_to_num">
<tt class="descclassname">pyanno.util.</tt><tt class="descname">ninf_to_num</tt><big>(</big><em>x</em><big>)</big><a class="reference internal" href="_modules/pyanno/util.html#ninf_to_num"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.util.ninf_to_num" title="Permalink to this definition">¶</a></dt>
<dd><p>Substitute -inf with smallest floating point number.</p>
</dd></dl>

<dl class="function">
<dt id="pyanno.util.normalize">
<tt class="descclassname">pyanno.util.</tt><tt class="descname">normalize</tt><big>(</big><em>x</em>, <em>dtype=&lt;type 'float'&gt;</em><big>)</big><a class="reference internal" href="_modules/pyanno/util.html#normalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.util.normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a normalized distribution (sums to 1.0).</p>
<p>If x consists only of zero element, the returned array has elements
1/n , where n is the length of x.</p>
</dd></dl>

<dl class="function">
<dt id="pyanno.util.random_categorical">
<tt class="descclassname">pyanno.util.</tt><tt class="descname">random_categorical</tt><big>(</big><em>distr</em>, <em>nsamples</em><big>)</big><a class="reference internal" href="_modules/pyanno/util.html#random_categorical"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.util.random_categorical" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an array of samples from a categorical distribution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>distr</strong> (<em>ndarray</em>) &#8211; distr[i] is the probability of item i</li>
<li><strong>nsamples</strong> (<em>int</em>) &#8211; Number of samples to draw from the distribution</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>samples</strong> (ndarray, shape = (n_samples, )) - Samples from the distribution</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyanno.util.string_wrap">
<tt class="descclassname">pyanno.util.</tt><tt class="descname">string_wrap</tt><big>(</big><em>st</em>, <em>mode</em><big>)</big><a class="reference internal" href="_modules/pyanno/util.html#string_wrap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.util.string_wrap" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="pyanno.util.MISSING_VALUE">
<tt class="descclassname">pyanno.util.</tt><tt class="descname">MISSING_VALUE</tt><em class="property"> = -1</em><a class="headerlink" href="#pyanno.util.MISSING_VALUE" title="Permalink to this definition">¶</a></dt>
<dd><p>In annotations arrays, this is the value used to indicate missing values</p>
</dd></dl>

<dl class="data">
<dt id="pyanno.util.SMALLEST_FLOAT">
<tt class="descclassname">pyanno.util.</tt><tt class="descname">SMALLEST_FLOAT</tt><em class="property"> = -1.7976931348623157e+308</em><a class="headerlink" href="#pyanno.util.SMALLEST_FLOAT" title="Permalink to this definition">¶</a></dt>
<dd><p>Smallest possible floating point number, somtimes used instead of -np.inf
to make numberical calculation return a meaningful value</p>
</dd></dl>

</div>
<div class="section" id="module-pyanno.sampling">
<span id="sampling-module"></span><h3><tt class="xref py py-mod docutils literal"><span class="pre">sampling</span></tt> Module<a class="headerlink" href="#module-pyanno.sampling" title="Permalink to this headline">¶</a></h3>
<p>This module defines functions to sample from a distribution given its
log likelihood.</p>
<dl class="function">
<dt id="pyanno.sampling.optimize_step_size">
<tt class="descclassname">pyanno.sampling.</tt><tt class="descname">optimize_step_size</tt><big>(</big><em>likelihood</em>, <em>x0</em>, <em>arguments</em>, <em>x_lower</em>, <em>x_upper</em>, <em>n_samples</em>, <em>recomputing_cycle</em>, <em>target_rejection_rate</em>, <em>tolerance</em><big>)</big><a class="reference internal" href="_modules/pyanno/sampling.html#optimize_step_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.sampling.optimize_step_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute optimum jump for MCMC estimation of credible intervals.</p>
<p>Adjust jump size in Metropolis-Hasting MC to achieve target rejection rate.
Jump size is estimated for each parameter separately.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>likelihood</strong> (<em>function(params, arguments)</em>) &#8211; Function returning the <em>unnormalized</em> log likelihood of data given
the parameters. The function accepts two arguments:
<cite>params</cite> is the vector of parameters; <cite>arguments</cite> contains any
additional argument that is needed to compute the log likelihood.</li>
<li><strong>x0</strong> (<em>ndarray, shape = (n_parameters, )</em>) &#8211; Initial parameters value.</li>
<li><strong>arguments</strong> (<em>any</em>) &#8211; Additional argument passed to the function <cite>likelihood</cite>.</li>
<li><strong>x_lower</strong> (<em>ndarray, shape = (n_parameters, )</em>) &#8211; Lower bound for the parameters.</li>
<li><strong>x_upper</strong> (<em>ndarray, shape = (n_parameters, )</em>) &#8211; Upper bound for the parameters.</li>
<li><strong>n_samples</strong> (<em>int</em>) &#8211; Total number of samples to draw during the optimization.</li>
<li><strong>recomputing_cycle</strong> (<em>int</em>) &#8211; Number of samples over which the rejection rates are computed. After
<cite>recomputing_cycle</cite> samples, the step size is adapted and the
rejection rates are reset to 0.</li>
<li><strong>target_rejection_rate</strong> (<em>float</em>) &#8211; Target rejection rate. If the rejection rate over the latest cycle is
closer than <cite>tolerance</cite> to this target, the optimization phase is
concluded.</li>
<li><strong>tolerance</strong> (<em>float</em>) &#8211; Tolerated deviation from <cite>target_rejection_rate</cite>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>step</strong> (ndarray, shape = (n_parameters, )) - The final optimized step size.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyanno.sampling.sample_distribution">
<tt class="descclassname">pyanno.sampling.</tt><tt class="descname">sample_distribution</tt><big>(</big><em>likelihood</em>, <em>x0</em>, <em>arguments</em>, <em>step</em>, <em>nsamples</em>, <em>x_lower</em>, <em>x_upper</em><big>)</big><a class="reference internal" href="_modules/pyanno/sampling.html#sample_distribution"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.sampling.sample_distribution" title="Permalink to this definition">¶</a></dt>
<dd><p>General-purpose sampling routine for MCMC sampling.</p>
<p>Draw samples from a distribution given its unnormalized log likelihood
using the Metropolis-Hasting Monte Carlo algorithm.</p>
<p>It is recommended to optimize the step size, <cite>step</cite>, using the function
<a class="reference internal" href="#pyanno.sampling.optimize_step_size" title="pyanno.sampling.optimize_step_size"><tt class="xref py py-func docutils literal"><span class="pre">optimize_step_size()</span></tt></a> in order to reduce the autocorrelation between
successive samples.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>likelihood</strong> (<em>function(params, arguments)</em>) &#8211; Function returning the <em>unnormalized</em> log likelihood of data given
the parameters. The function accepts two arguments:
<cite>params</cite> is the vector of parameters; <cite>arguments</cite> contains any
additional argument that is needed to compute the log likelihood.</li>
<li><strong>x0</strong> (<em>ndarray, shape = (n_parameters, )</em>) &#8211; Initial parameters value.</li>
<li><strong>arguments</strong> (<em>any</em>) &#8211; Additional argument passed to the function <cite>likelihood</cite>.</li>
<li><strong>step</strong> (<em>ndarray, shape = (n_parameters, )</em>) &#8211; Width of the proposal distribution over the parameters.</li>
<li><strong>nsamples</strong> (<em>int</em>) &#8211; Number of samples to draw from the distribution.</li>
<li><strong>x_lower</strong> (<em>ndarray, shape = (n_parameters, )</em>) &#8211; Lower bound for the parameters.</li>
<li><strong>x_upper</strong> (<em>ndarray, shape = (n_parameters, )</em>) &#8211; Upper bound for the parameters.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyanno.sampling.sample_from_proposal_distribution">
<tt class="descclassname">pyanno.sampling.</tt><tt class="descname">sample_from_proposal_distribution</tt><big>(</big><em>theta</em>, <em>step</em>, <em>lower</em>, <em>upper</em><big>)</big><a class="reference internal" href="_modules/pyanno/sampling.html#sample_from_proposal_distribution"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyanno.sampling.sample_from_proposal_distribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns one sample from the proposal distribution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>theta</strong> (<em>float</em>) &#8211; current parameter value</li>
<li><strong>step</strong> (<em>float</em>) &#8211; width of the proposal distribution over <cite>theta</cite></li>
<li><strong>lower</strong> (<em>float</em>) &#8211; lower bound for <cite>theta</cite></li>
<li><strong>upper</strong> (<em>float</em>) &#8211; upper bound for <cite>theta</cite></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>theta_new</strong> (float) - new sample from the distribution over theta</li>
<li><strong>log_q_ratio</strong> (float) - log-ratio of probability of new value given old value to probability of old value given new value</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pyanno Package</a><ul>
<li><a class="reference internal" href="#id1"><tt class="docutils literal"><span class="pre">pyanno</span></tt> Package</a><ul>
</ul>
</li>
<li><a class="reference internal" href="#other-modules">Other modules</a><ul>
<li><a class="reference internal" href="#module-pyanno.abstract_model"><tt class="docutils literal"><span class="pre">abstract_model</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-pyanno.util"><tt class="docutils literal"><span class="pre">util</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-pyanno.sampling"><tt class="docutils literal"><span class="pre">sampling</span></tt> Module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="modules.html"
                        title="previous chapter">Project Modules</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pyanno.models.html"
                        title="next chapter">models Module</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/pyanno.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pyanno.models.html" title="models Module"
             >next</a> |</li>
        <li class="right" >
          <a href="modules.html" title="Project Modules"
             >previous</a> |</li>
        <li><a href="index.html">pyanno 2.0dev documentation</a> &raquo;</li>
          <li><a href="modules.html" >Project Modules</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Pietro Berkes, Bob Carpenter, Andrey Rzhetsky, James A. Evans.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>